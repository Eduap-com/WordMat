<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.0.3, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Program Flow (Maxima 5.47.0 Manual)</title>

<meta name="description" content="Program Flow (Maxima 5.47.0 Manual)">
<meta name="keywords" content="Program Flow (Maxima 5.47.0 Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="maxima_toc.html" rel="start" title="Top">
<link href="Function-and-Variable-Index.html" rel="index" title="Function and Variable Index">
<link href="maxima_toc.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="maxima_toc.html" rel="up" title="Top">
<link href="maxima_37.html#Debugging" rel="next" title="Debugging">
<link href="maxima_35.html#Function-Definition" rel="prev" title="Function Definition">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
blockquote.indentedblock {margin-right: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
ul.mark-bullet {list-style-type: disc}
body {color: black; background: white;  margin-left: 8%; margin-right: 13%;
      font-family: "FreeSans", sans-serif}
h1 {font-size: 150%; font-family: "FreeSans", sans-serif}
h2 {font-size: 125%; font-family: "FreeSans", sans-serif}
h3 {font-size: 100%; font-family: "FreeSans", sans-serif}
a[href] {color: rgb(0,0,255); text-decoration: none;}
a[href]:hover {background: rgb(220,220,220);}
div.textbox {border: solid; border-width: thin; padding-top: 1em;
    padding-bottom: 1em; padding-left: 2em; padding-right: 2em}
div.titlebox {border: none; padding-top: 1em; padding-bottom: 1em;
    padding-left: 2em; padding-right: 2em; background: rgb(200,255,255);
    font-family: sans-serif}
div.synopsisbox {
    border: none; padding-top: 1em; padding-bottom: 1em; padding-left: 2em;
    padding-right: 2em; background: rgb(255,220,255);}
pre.example {border: 1px solid rgb(180,180,180); padding-top: 1em;
    padding-bottom: 1em; padding-left: 1em; padding-right: 1em;
    background-color: rgb(238,238,255)}
div.spacerbox {border: none; padding-top: 2em; padding-bottom: 2em}
div.image {margin: 0; padding: 1em; text-align: center}
div.categorybox {border: 1px solid gray; padding-top: 1em; padding-bottom: 1em;
    padding-left: 1em; padding-right: 1em; background: rgb(247,242,220)}
img {max-width:80%; max-height: 80%; display: block; margin-left: auto; margin-right: auto}

-->
</style>

<script type='text/javascript'>
MathJax = {
  options: {
    skipHtmlTags: {'[-]': ['pre']},
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  },
};
</script><script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
</head>

<body lang="en" class="tex2jax_ignore">
<div class="chapter-level-extent" id="Program-Flow">
<div class="nav-panel">
<p>
Next: <a href="maxima_37.html#Debugging" accesskey="n" rel="next">Debugging</a>, Previous: <a href="maxima_35.html#Function-Definition" accesskey="p" rel="prev">Function Definition</a> &nbsp; [<a href="maxima_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Variable-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Program-Flow-1">37 Program Flow</h2>

<a class="anchor" id="Item_003a-Program_002fnode_002fLisp-and-Maxima"></a><ul class="mini-toc">
<li><a href="#Lisp-and-Maxima" accesskey="1">Lisp and Maxima</a></li>
<li><a href="#Garbage-Collection" accesskey="2">Garbage Collection</a></li>
<li><a href="#Introduction-to-Program-Flow" accesskey="3">Introduction to Program Flow</a></li>
<li><a href="#Functions-and-Variables-for-Program-Flow" accesskey="4">Functions and Variables for Program Flow</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Lisp-and-Maxima">
<div class="nav-panel">
<p>
Next: <a href="#Garbage-Collection" accesskey="n" rel="next">Garbage Collection</a>, Previous: <a href="#Program-Flow" accesskey="p" rel="prev">Program Flow</a>, Up: <a href="#Program-Flow" accesskey="u" rel="up">Program Flow</a> &nbsp; [<a href="maxima_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Variable-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Lisp-and-Maxima-1">37.1 Lisp and Maxima</h3>

<p>Maxima is a fairly complete programming language. But since it is written in
Lisp, it additionally can provide easy access to Lisp functions and variables
from Maxima and vice versa.  Lisp and Maxima symbols are distinguished by a
naming convention.  A Lisp symbol which begins with a dollar sign <code class="code">$</code>
corresponds to a Maxima symbol without the dollar sign.
</p>

<p>A Maxima symbol which begins with a question mark <code class="code">?</code> corresponds to a Lisp
symbol without the question mark.  For example, the Maxima symbol <code class="code">foo</code>
corresponds to the Lisp symbol <code class="code">$FOO</code>, while the Maxima symbol <code class="code">?foo</code>
corresponds to the Lisp symbol <code class="code">FOO</code>.  Note that <code class="code">?foo</code> is written
without a space between <code class="code">?</code> and <code class="code">foo</code>; otherwise it might be mistaken
for <code class="code">describe (&quot;foo&quot;)</code>.
</p>
<p>Hyphen <code class="code">-</code>, asterisk <code class="code">*</code>, or other special characters in Lisp symbols
must be escaped by backslash <code class="code">\</code> where they appear in Maxima code.  For
example, the Lisp identifier <code class="code">*foo-bar*</code> is written <code class="code">?\*foo\-bar\*</code>
in Maxima.
</p>
<p>Lisp code may be executed from within a Maxima session.  A single line of Lisp
(containing one or more forms) may be executed by the special command
<code class="code">:lisp</code>.  For example,
</p>
<div class="example">
<pre class="example-preformatted">(%i1) :lisp (foo $x $y)
</pre></div>

<p>calls the Lisp function <code class="code">foo</code> with Maxima variables <code class="code">x</code> and <code class="code">y</code>
as arguments.  The <code class="code">:lisp</code> construct can appear at the interactive prompt
or in a file processed by <code class="code"><a class="ref" href="maxima_12.html#batch">batch</a></code> or <code class="code"><a class="ref" href="maxima_2.html#demo">demo</a></code>, but not in a file
processed by <code class="code"><a class="ref" href="maxima_12.html#load">load</a></code>, <code class="code"><a class="ref" href="maxima_12.html#batchload">batchload</a></code>,<!-- /@w -->
<code class="code"><a class="ref" href="maxima_35.html#translate_005ffile">translate_file</a></code>, or <code class="code"><a class="ref" href="maxima_35.html#compile_005ffile">compile_file</a></code>.
</p>
<p>The function <code class="code"><a class="ref" href="maxima_3.html#to_005flisp">to_lisp</a></code> opens an interactive Lisp session.
Entering <code class="code">(to-maxima)</code> closes the Lisp session and returns to Maxima.
</p>
<p>Lisp functions and variables which are to be visible in Maxima as functions and
variables with ordinary names (no special punctuation) must have Lisp names
beginning with the dollar sign <code class="code">$</code>.
</p>
<p>Maxima is case-sensitive, distinguishing between lowercase and uppercase letters
in identifiers.  There are some rules governing the translation of names between
Lisp and Maxima.
</p>
<ol class="enumerate">
<li> A Lisp identifier not enclosed in vertical bars corresponds to a Maxima
identifier in lowercase.  Whether the Lisp identifier is uppercase, lowercase,
or mixed case, is ignored.  E.g., Lisp <code class="code">$foo</code>, <code class="code">$FOO</code>, and <code class="code">$Foo</code>
all correspond to Maxima <code class="code">foo</code>.  But this is because <code class="code">$foo</code>,
<code class="code">$FOO</code> and <code class="code">$Foo</code> are converted by the Lisp reader by default to the
Lisp symbol <code class="code">$FOO</code>.
</li><li> A Lisp identifier which is all uppercase or all lowercase and enclosed in
vertical bars corresponds to a Maxima identifier with case reversed.  That is,
uppercase is changed to lowercase and lowercase to uppercase.  E.g., Lisp
<code class="code">|$FOO|</code> and <code class="code">|$foo|</code> correspond to Maxima <code class="code">foo</code> and <code class="code">FOO</code>,
respectively.
</li><li> A Lisp identifier which is mixed uppercase and lowercase and enclosed in
vertical bars corresponds to a Maxima identifier with the same case.  E.g.,
Lisp <code class="code">|$Foo|</code> corresponds to Maxima <code class="code">Foo</code>.
</li></ol>

<p>The <code class="code">#$</code> Lisp macro allows the use of Maxima expressions in Lisp code.
<code class="code">#$<var class="var">expr</var>$</code> expands to a Lisp expression equivalent to the Maxima
expression <var class="var">expr</var>.
</p>
<div class="example">
<pre class="example-preformatted">(msetq $foo #$[x, y]$)
</pre></div>

<p>This has the same effect as entering
</p>
<div class="example">
<pre class="example-preformatted">(%i1) foo: [x, y];
</pre></div>

<p>The Lisp function <code class="code">displa</code> prints an expression in Maxima format.
</p>
<div class="example">
<pre class="example-preformatted">(%i1) :lisp #$[x, y, z]$ 
((MLIST SIMP) $X $Y $Z)
(%i1) :lisp (displa '((MLIST SIMP) $X $Y $Z))
[x, y, z]
NIL
</pre></div>

<p>Functions defined in Maxima are not ordinary Lisp functions.  The Lisp function
<code class="code">mfuncall</code> calls a Maxima function.  For example:
</p>
<div class="example">
<pre class="example-preformatted">(%i1) foo(x,y) := x*y$
(%i2) :lisp (mfuncall '$foo 'a 'b)
((MTIMES SIMP) A B)
</pre></div>

<p>Some Lisp functions are shadowed in the Maxima package, namely the following.
</p>
<pre class="verbatim">   complement     continue      //
   float          functionp     array
   exp            listen        signum
   atan           asin          acos
   asinh          acosh         atanh
   tanh           cosh          sinh
   tan            break         gcd
</pre>
<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Programming">Programming</a>
&middot;
</div>

<a class="anchor" id="Item_003a-Program_002fnode_002fGarbage-Collection"></a><hr>
</div>
<div class="section-level-extent" id="Garbage-Collection">
<div class="nav-panel">
<p>
Next: <a href="#Introduction-to-Program-Flow" accesskey="n" rel="next">Introduction to Program Flow</a>, Previous: <a href="#Lisp-and-Maxima" accesskey="p" rel="prev">Lisp and Maxima</a>, Up: <a href="#Program-Flow" accesskey="u" rel="up">Program Flow</a> &nbsp; [<a href="maxima_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Variable-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Garbage-Collection-1">37.2 Garbage Collection</h3>

<p>One of the advantages of using lisp is that it uses &ldquo;Garbage Collection&rdquo;. In other
words it automatically takes care of freeing memory occupied for example of
intermediate results that were used during symbolic computation.
</p>
<p>Garbage Collection avoids many errors frequently found in C programs (memory
being freed too early, multiple times or not at all).
</p>

<a class="anchor" id="garbage_005fcollect"></a><a class="anchor" id="Item_003a-Program_002fdeffn_002fgarbage_005fcollect"></a><dl class="first-deffn">
<dt class="deffn" id="index-garbage_005fcollect"><span class="category-def">Function: </span><span><strong class="def-name">garbage_collect</strong> <var class="def-var-arguments">()</var><a class="copiable-link" href='#index-garbage_005fcollect'> &para;</a></span></dt>
<dd>
<p>Tries to manually trigger the lisp&rsquo;s garbage collection. This rarely is necessary
as the lisp will employ an excellent algorithm for determining when to start
garbage collection.
</p>
<p>If maxima knows how to do manually trigger the garbage collection for the
current lisp <code class="code">garbage_collect</code> returns <code class="code">true</code>, else <code class="code">false</code>.
</p>
<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Programming">Programming</a>
&middot;
</div>
</dd></dl>

<a class="anchor" id="Item_003a-Program_002fnode_002fIntroduction-to-Program-Flow"></a><hr>
</div>
<div class="section-level-extent" id="Introduction-to-Program-Flow">
<div class="nav-panel">
<p>
Next: <a href="#Functions-and-Variables-for-Program-Flow" accesskey="n" rel="next">Functions and Variables for Program Flow</a>, Previous: <a href="#Garbage-Collection" accesskey="p" rel="prev">Garbage Collection</a>, Up: <a href="#Program-Flow" accesskey="u" rel="up">Program Flow</a> &nbsp; [<a href="maxima_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Variable-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Introduction-to-Program-Flow-1">37.3 Introduction to Program Flow</h3>

<p>Maxima provides a <code class="code">do</code> loop for iteration, as well as more primitive
constructs such as <code class="code">go</code>.
</p>

<a class="anchor" id="Item_003a-Program_002fnode_002fFunctions-and-Variables-for-Program-Flow"></a><hr>
</div>
<div class="section-level-extent" id="Functions-and-Variables-for-Program-Flow">
<div class="nav-panel">
<p>
Previous: <a href="#Introduction-to-Program-Flow" accesskey="p" rel="prev">Introduction to Program Flow</a>, Up: <a href="#Program-Flow" accesskey="u" rel="up">Program Flow</a> &nbsp; [<a href="maxima_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Variable-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Functions-and-Variables-for-Program-Flow-1">37.4 Functions and Variables for Program Flow</h3>

<a class="anchor" id="backtrace"></a><a class="anchor" id="Item_003a-Program_002fdeffn_002fbacktrace"></a><dl class="first-deffn">
<dt class="deffn" id="index-backtrace"><span class="category-def">Function: </span><span><strong class="def-name">backtrace</strong> <var class="def-var-arguments"><br>&nbsp;&nbsp;&nbsp;&nbsp;<code class="t">backtrace</code> () <br>&nbsp;&nbsp;&nbsp;&nbsp;<code class="t">backtrace</code> (<var class="var">n</var>)</var><a class="copiable-link" href='#index-backtrace'> &para;</a></span></dt>
<dd>
<p>Prints the call stack, that is, the list of functions which
called the currently active function.
</p>
<p><code class="code">backtrace ()</code> prints the entire call stack.
</p>
<p><code class="code">backtrace (<var class="var">n</var>)</code> prints the <var class="var">n</var> most recent 
functions, including the currently active function.
</p>
<p><code class="code">backtrace</code> can be called from a script, a function, or the interactive
prompt (not only in a debugging context).
</p>
<p>Examples:
</p>
<ul class="itemize mark-bullet">
<li><code class="code">backtrace ()</code> prints the entire call stack.

<div class="example">
<pre class="example-preformatted">(%i1) h(x) := g(x/7)$
(%i2) g(x) := f(x-11)$
(%i3) f(x) := e(x^2)$
(%i4) e(x) := (backtrace(), 2*x + 13)$
(%i5) h(10);
#0: e(x=4489/49)
#1: f(x=-67/7)
#2: g(x=10/7)
#3: h(x=10)
                              9615
(%o5)                         ----
                               49
</pre></div>
</li></ul>

<ul class="itemize mark-bullet">
<li><code class="code">backtrace (<var class="var">n</var>)</code> prints the <var class="var">n</var> most recent 
functions, including the currently active function.

<div class="example">
<pre class="example-preformatted">(%i1) h(x) := (backtrace(1), g(x/7))$
(%i2) g(x) := (backtrace(1), f(x-11))$
(%i3) f(x) := (backtrace(1), e(x^2))$
(%i4) e(x) := (backtrace(1), 2*x + 13)$
(%i5) h(10);
#0: h(x=10)
#0: g(x=10/7)
#0: f(x=-67/7)
#0: e(x=4489/49)
                              9615
(%o5)                         ----
                               49
</pre></div>
</li></ul>

<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Debugging">Debugging</a>
&middot;
</div>
</dd></dl>

<a class="anchor" id="do"></a><a class="anchor" id="while"></a><a class="anchor" id="unless"></a><a class="anchor" id="for"></a><a class="anchor" id="from"></a><a class="anchor" id="thru"></a><a class="anchor" id="step"></a><a class="anchor" id="next"></a><a class="anchor" id="in"></a><a class="anchor" id="Item_003a-Program_002fdeffn_002fdo"></a><dl class="first-deffn">
<dt class="deffn" id="index-do"><span class="category-def">Special operator: </span><span><strong class="def-name">do</strong><a class="copiable-link" href='#index-do'> &para;</a></span></dt>
<dd><a class="anchor" id="Item_003a-Program_002fdeffn_002fwhile"></a></dd><dt class="deffnx def-cmd-deffn" id="index-while"><span class="category-def">Special operator: </span><span><strong class="def-name">while</strong><a class="copiable-link" href='#index-while'> &para;</a></span></dt>
<dd><a class="anchor" id="Item_003a-Program_002fdeffn_002funless"></a></dd><dt class="deffnx def-cmd-deffn" id="index-unless"><span class="category-def">Special operator: </span><span><strong class="def-name">unless</strong><a class="copiable-link" href='#index-unless'> &para;</a></span></dt>
<dd><a class="anchor" id="Item_003a-Program_002fdeffn_002ffor"></a></dd><dt class="deffnx def-cmd-deffn" id="index-for"><span class="category-def">Special operator: </span><span><strong class="def-name">for</strong><a class="copiable-link" href='#index-for'> &para;</a></span></dt>
<dd><a class="anchor" id="Item_003a-Program_002fdeffn_002ffrom"></a></dd><dt class="deffnx def-cmd-deffn" id="index-from"><span class="category-def">Special operator: </span><span><strong class="def-name">from</strong><a class="copiable-link" href='#index-from'> &para;</a></span></dt>
<dd><a class="anchor" id="Item_003a-Program_002fdeffn_002fthru"></a></dd><dt class="deffnx def-cmd-deffn" id="index-thru"><span class="category-def">Special operator: </span><span><strong class="def-name">thru</strong><a class="copiable-link" href='#index-thru'> &para;</a></span></dt>
<dd><a class="anchor" id="Item_003a-Program_002fdeffn_002fstep"></a></dd><dt class="deffnx def-cmd-deffn" id="index-step"><span class="category-def">Special operator: </span><span><strong class="def-name">step</strong><a class="copiable-link" href='#index-step'> &para;</a></span></dt>
<dd><a class="anchor" id="Item_003a-Program_002fdeffn_002fnext"></a></dd><dt class="deffnx def-cmd-deffn" id="index-next"><span class="category-def">Special operator: </span><span><strong class="def-name">next</strong><a class="copiable-link" href='#index-next'> &para;</a></span></dt>
<dd><a class="anchor" id="Item_003a-Program_002fdeffn_002fin"></a></dd><dt class="deffnx def-cmd-deffn" id="index-in"><span class="category-def">Special operator: </span><span><strong class="def-name">in</strong><a class="copiable-link" href='#index-in'> &para;</a></span></dt>
<dd>
<p>The <code class="code">do</code> statement is used for performing iteration. The general
form of the <code class="code">do</code> statements maxima supports is:
</p>
<ul class="itemize mark-bullet">
<li><code class="code">for <var class="var">variable</var>: <var class="var">initial_value</var> step <var class="var">increment</var>
      thru <var class="var">limit</var> do <var class="var">body</var></code>
</li><li><code class="code">for <var class="var">variable</var>: <var class="var">initial_value</var> step <var class="var">increment</var>
      while <var class="var">condition</var> do <var class="var">body</var></code>
</li><li><code class="code">for <var class="var">variable</var>: <var class="var">initial_value</var> step <var class="var">increment</var>
      unless <var class="var">condition</var> do <var class="var">body</var></code>
</li><li><code class="code">for <var class="var">variable</var> in <var class="var">list</var> do <var class="var">body</var></code>
</li></ul>

<p>If the loop is expected to generate a list as output the command
<code class="code"><a class="ref" href="maxima_4.html#makelist">makelist</a></code> may be the appropriate command to use instead,
See <a class="xref" href="maxima_4.html#Performance-considerations-for-Lists">Performance considerations for Lists</a>.
</p>
<p><var class="var">initial_value</var>, <var class="var">increment</var>, <var class="var">limit</var>, and <var class="var">body</var> can be any
expression. <var class="var">list</var> is a list.  If the increment is 1 then &quot;<code class="code">step 1</code>&quot;
may be omitted; As always, if <code class="code">body</code> needs to contain more than one command
these commands can be specified as a comma-separated list surrounded
by parenthesis or as a <code class="code"><a class="ref" href="maxima_35.html#block">block</a></code>.
Due to its great generality the <code class="code">do</code> statement will be described in two parts.
The first form of the <code class="code">do</code> statement (which is shown in the first three
items above) is analogous to that used in
several other programming languages (Fortran, Algol, PL/I, etc.); then
the other features will be mentioned.
</p>
<p>The execution of the <code class="code">do</code> statement proceeds by first assigning
the <var class="var">initial_value</var> to the <var class="var">variable</var> (henceforth called the
control-variable).  Then: (1) If the control-variable has exceeded the
limit of a <code class="code">thru</code> specification, or if the condition of the
<code class="code">unless</code> is <code class="code">true</code>, or if the condition of the <code class="code">while</code>
is <code class="code">false</code> then the <code class="code">do</code> terminates.  (2) The <var class="var">body</var> is
evaluated.  (3) The increment is added to the control-variable.  The
process from (1) to (3) is performed repeatedly until the termination
condition is satisfied.  One may also give several termination
conditions in which case the <code class="code">do</code> terminates when any of them is
satisfied.
</p>
<p>In general the <code class="code">thru</code> test is satisfied when the control-variable
is greater than the <var class="var">limit</var> if the <var class="var">increment</var> was
non-negative, or when the control-variable is less than the
<var class="var">limit</var> if the <var class="var">increment</var> was negative.  The
<var class="var">increment</var> and <var class="var">limit</var> may be non-numeric expressions as
long as this inequality can be determined.  However, unless the
<var class="var">increment</var> is syntactically negative (e.g. is a negative number)
at the time the <code class="code">do</code> statement is input, Maxima assumes it will
be positive when the <code class="code">do</code> is executed.  If it is not positive,
then the <code class="code">do</code> may not terminate properly.
</p>
<p>Note that the <var class="var">limit</var>, <var class="var">increment</var>, and termination condition are
evaluated each time through the loop.  Thus if any of these involve
much computation, and yield a result that does not change during all
the executions of the <var class="var">body</var>, then it is more efficient to set a
variable to their value prior to the <code class="code">do</code> and use this variable in the
<code class="code">do</code> form.
</p>
<p>The value normally returned by a <code class="code">do</code> statement is the atom
<code class="code">done</code>.  However, the function <code class="code">return</code> may be used inside
the <var class="var">body</var> to exit the <code class="code">do</code> prematurely and give it any
desired value.  Note however that a <code class="code">return</code> within a <code class="code">do</code>
that occurs in a <code class="code">block</code> will exit only the <code class="code">do</code> and not the
<code class="code">block</code>.  Note also that the <code class="code">go</code> function may not be used
to exit from a <code class="code">do</code> into a surrounding <code class="code">block</code>.
</p>
<p>The control-variable is always local to the <code class="code">do</code> and thus any
variable may be used without affecting the value of a variable with
the same name outside of the <code class="code">do</code>.  The control-variable is unbound
after the <code class="code">do</code> terminates.
</p>
<div class="example">
<pre class="example-preformatted">(%i1) for a:-3 thru 26 step 7 do display(a)$
                             a = - 3

                              a = 4

                             a = 11

                             a = 18

                             a = 25
</pre></div>

<div class="example">
<pre class="example-preformatted">(%i1) s: 0$
(%i2) for i: 1 while i &lt;= 10 do s: s+i;
(%o2)                         done
(%i3) s;
(%o3)                          55
</pre></div>

<p>Note that the condition <code class="code">while i &lt;= 10</code>
is equivalent to <code class="code">unless i &gt; 10</code> and also <code class="code">thru 10</code>.
</p>
<div class="example">
<pre class="example-preformatted">(%i1) series: 1$
(%i2) term: exp (sin (x))$
(%i3) for p: 1 unless p &gt; 7 do
          (term: diff (term, x)/p, 
           series: series + subst (x=0, term)*x^p)$
(%i4) series;
                  7    6     5    4    2
                 x    x     x    x    x
(%o4)            -- - --- - -- - -- + -- + x + 1
                 90   240   15   8    2
</pre></div>

<p>which gives 8 terms of the Taylor series for <code class="code">e^sin(x)</code>.
</p>
<div class="example">
<pre class="example-preformatted">(%i1) poly: 0$
(%i2) for i: 1 thru 5 do
          for j: i step -1 thru 1 do
              poly: poly + i*x^j$
(%i3) poly;
                  5      4       3       2
(%o3)          5 x  + 9 x  + 12 x  + 14 x  + 15 x
(%i4) guess: -3.0$
(%i5) for i: 1 thru 10 do
          (guess: subst (guess, x, 0.5*(x + 10/x)),
           if abs (guess^2 - 10) &lt; 0.00005 then return (guess));
(%o5)                  - 3.162280701754386
</pre></div>

<p>This example computes the negative square root of 10 using the
Newton- Raphson iteration a maximum of 10 times.  Had the convergence
criterion not been met the value returned would have been <code class="code">done</code>.
</p>
<p>Instead of always adding a quantity to the control-variable one
may sometimes wish to change it in some other way for each iteration.
In this case one may use <code class="code">next <var class="var">expression</var></code> instead of
<code class="code">step <var class="var">increment</var></code>.  This will cause the control-variable to be set to
the result of evaluating <var class="var">expression</var> each time through the loop.
</p>
<div class="example">
<pre class="example-preformatted">(%i6) for count: 2 next 3*count thru 20 do display (count)$
                            count = 2

                            count = 6

                           count = 18
</pre></div>

<p>As an alternative to <code class="code">for <var class="var">variable</var>: <var class="var">value</var> ...do...</code>
the syntax <code class="code">for <var class="var">variable</var> from <var class="var">value</var> ...do...</code>  may be
used.  This permits the <code class="code">from <var class="var">value</var></code> to be placed after the
<code class="code">step</code> or <code class="code">next</code> value or after the termination condition.
If <code class="code">from <var class="var">value</var></code> is omitted then 1 is used as the initial
value.
</p>
<p>Sometimes one may be interested in performing an iteration where
the control-variable is never actually used.  It is thus permissible
to give only the termination conditions omitting the initialization
and updating information as in the following example to compute the
square-root of 5 using a poor initial guess.
</p>
<div class="example">
<pre class="example-preformatted">(%i1) x: 1000$
(%i2) thru 20 do x: 0.5*(x + 5.0/x)$
(%i3) x;
(%o3)                   2.23606797749979
(%i4) sqrt(5), numer;
(%o4)                   2.23606797749979
</pre></div>

<p>If it is desired one may even omit the termination conditions entirely
and just give <code class="code">do <var class="var">body</var></code> which will continue to evaluate the
<var class="var">body</var> indefinitely.  In this case the function <code class="code">return</code>
should be used to terminate execution of the <code class="code">do</code>.
</p>
<div class="example">
<pre class="example-preformatted">(%i1) newton (f, x):= ([y, df, dfx], df: diff (f ('x), 'x),
          do (y: ev(df), x: x - f(x)/y, 
              if abs (f (x)) &lt; 5e-6 then return (x)))$
(%i2) sqr (x) := x^2 - 5.0$
(%i3) newton (sqr, 1000);
(%o3)                   2.236068027062195
</pre></div>

<p>(Note that <code class="code">return</code>, when executed, causes the current value of <code class="code">x</code> to
be returned as the value of the <code class="code">do</code>.  The <code class="code">block</code> is exited and this
value of the <code class="code">do</code> is returned as the value of the <code class="code">block</code> because the
<code class="code">do</code> is the last statement in the block.)
</p>
<p>One other form of the <code class="code">do</code> is available in Maxima.  The syntax is:
</p>
<div class="example">
<pre class="example-preformatted">for <var class="var">variable</var> in <var class="var">list</var> <var class="var">end_tests</var> do <var class="var">body</var>
</pre></div>

<p>The elements of <var class="var">list</var> are any expressions which will successively
be assigned to the <code class="code">variable</code> on each iteration of the
<var class="var">body</var>.  The optional termination tests <var class="var">end_tests</var> can be
used to terminate execution of the <code class="code">do</code>; otherwise it will
terminate when the <var class="var">list</var> is exhausted or when a <code class="code">return</code> is
executed in the <var class="var">body</var>.  (In fact, <code class="code">list</code> may be any
non-atomic expression, and successive parts are taken.)
</p>
<div class="example">
<pre class="example-preformatted">(%i1)  for f in [log, rho, atan] do ldisp(f(1))$
(%t1)                                  0
(%t2)                                rho(1)
                                     %pi
(%t3)                                 ---
                                      4
(%i4) ev(%t3,numer);
(%o4)                             0.78539816
</pre></div>

<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Programming">Programming</a>
&middot;
</div>
</dd></dl>

<a class="anchor" id="errcatch"></a><a class="anchor" id="Item_003a-Program_002fdeffn_002ferrcatch"></a><dl class="first-deffn">
<dt class="deffn" id="index-errcatch"><span class="category-def">Function: </span><span><strong class="def-name">errcatch</strong> <var class="def-var-arguments">(<var class="var">expr_1</var>, &hellip;, <var class="var">expr_n</var>)</var><a class="copiable-link" href='#index-errcatch'> &para;</a></span></dt>
<dd>
<p>Evaluates <var class="var">expr_1</var>, &hellip;, <var class="var">expr_n</var> one by one and
returns <code class="code">[<var class="var">expr_n</var>]</code> (a list) if no error occurs.  If an
error occurs in the evaluation of any argument, <code class="code">errcatch</code> 
prevents the error from propagating and
returns the empty list <code class="code">[]</code> without evaluating any more arguments.
</p>
<p><code class="code">errcatch</code>
is useful in <code class="code">batch</code> files where one suspects an error might occur which
would terminate the <code class="code">batch</code> if the error weren&rsquo;t caught.
</p>
<p>See also <code class="code"><a class="ref" href="#errormsg">errormsg</a></code>.
</p>
<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Programming">Programming</a>
&middot;
</div>
</dd></dl>

<a class="anchor" id="error"></a><a class="anchor" id="Item_003a-Program_002fdeffn_002ferror"></a><dl class="first-deffn">
<dt class="deffn" id="index-error"><span class="category-def">Function: </span><span><strong class="def-name">error</strong> <var class="def-var-arguments">(<var class="var">expr_1</var>, &hellip;, <var class="var">expr_n</var>)</var><a class="copiable-link" href='#index-error'> &para;</a></span></dt>
<dt class="deffnx def-cmd-deffn" id="index-error-1"><span class="category-def">System variable: </span><span><strong class="def-name">error</strong><a class="copiable-link" href='#index-error-1'> &para;</a></span></dt>
<dd>
<p>Evaluates and prints <var class="var">expr_1</var>, &hellip;, <var class="var">expr_n</var>,
and then causes an error return to top level Maxima
or to the nearest enclosing <code class="code">errcatch</code>.
</p>
<p>The variable <code class="code">error</code> is set to a list describing the error.
The first element of <code class="code">error</code> is a format string, which merges all the
strings among the arguments <var class="var">expr_1</var>, &hellip;, <var class="var">expr_n</var>,
and the remaining elements are the values of any non-string arguments.
</p>
<p><code class="code">errormsg()</code> formats and prints <code class="code">error</code>.
This is effectively reprinting the most recent error message.
</p>
<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Programming">Programming</a>
&middot;
</div>
</dd></dl>

<a class="anchor" id="warning"></a><a class="anchor" id="Item_003a-Program_002fdeffn_002fwarning"></a><dl class="first-deffn">
<dt class="deffn" id="index-warning"><span class="category-def">Function: </span><span><strong class="def-name">warning</strong> <var class="def-var-arguments">(<var class="var">expr_1</var>, &hellip;, <var class="var">expr_n</var>)</var><a class="copiable-link" href='#index-warning'> &para;</a></span></dt>
<dd>
<p>Evaluates and prints <var class="var">expr_1</var>, &hellip;, <var class="var">expr_n</var>,
as a warning message that is formatted in a standard way so a maxima front-end
may be able to recognize the warning and to format it accordingly.
</p>
<p>The function <code class="code">warning</code> always returns false.
</p>
<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Programming">Programming</a>
&middot;
</div>
</dd></dl>

<a class="anchor" id="error_005fsize"></a><a class="anchor" id="Item_003a-Program_002fdefvr_002ferror_005fsize"></a><dl class="first-defvr">
<dt class="defvr" id="index-error_005fsize"><span class="category-def">Option variable: </span><span><strong class="def-name">error_size</strong><a class="copiable-link" href='#index-error_005fsize'> &para;</a></span></dt>
<dd><p>Default value: 60
</p>
<p><code class="code">error_size</code> modifies error messages according to the size of expressions
which appear in them.  If the size of an expression (as determined by the Lisp
function <code class="code">ERROR-SIZE</code>) is greater than <code class="code">error_size</code>, the expression is
replaced in the message by a symbol, and the symbol is assigned the expression.
The symbols are taken from the list <code class="code"><a class="ref" href="#error_005fsyms">error_syms</a></code>.
</p>
<p>Otherwise, the expression is smaller than <code class="code">error_size</code>, and the expression
is displayed in the message.
</p>
<p>See also <code class="code"><a class="ref" href="#error">error</a></code> and <code class="code"><a class="ref" href="#error_005fsyms">error_syms</a></code>.
</p>
<p>Example:
</p>
<p>The size of <code class="code">U</code>, as determined by <code class="code">ERROR-SIZE</code>, is 24.
</p>
<div class="example">
<pre class="example-preformatted">(%i1) U: (C^D^E + B + A)/(cos(X-1) + 1)$

(%i2) error_size: 20$

(%i3) error (&quot;Example expression is&quot;, U);

Example expression is errexp1
 -- an error.  Quitting.  To debug this try debugmode(true);
(%i4) errexp1;
                            E
                           D
                          C   + B + A
(%o4)                    --------------
                         cos(X - 1) + 1
(%i5) error_size: 30$

(%i6) error (&quot;Example expression is&quot;, U);

                         E
                        D
                       C   + B + A
Example expression is --------------
                      cos(X - 1) + 1
 -- an error.  Quitting.  To debug this try debugmode(true);
</pre></div>

<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Debugging">Debugging</a>
&middot;
<a class="ref" href="Documentation-Categories.html#Category_003a-Display-flags-and-variables">Display flags and variables</a>
&middot;
</div>
</dd></dl>

<a class="anchor" id="error_005fsyms"></a><a class="anchor" id="Item_003a-Program_002fdefvr_002ferror_005fsyms"></a><dl class="first-defvr">
<dt class="defvr" id="index-error_005fsyms"><span class="category-def">Option variable: </span><span><strong class="def-name">error_syms</strong><a class="copiable-link" href='#index-error_005fsyms'> &para;</a></span></dt>
<dd><p>Default value: <code class="code">[errexp1, errexp2, errexp3]</code>
</p>
<p>In error messages, expressions larger than <code class="code"><a class="ref" href="#error_005fsize">error_size</a></code> are replaced by
symbols, and the symbols are set to the expressions.  The symbols are taken from
the list <code class="code">error_syms</code>.  The first too-large expression is replaced by
<code class="code">error_syms[1]</code>, the second by <code class="code">error_syms[2]</code>, and so on.
</p>
<p>If there are more too-large expressions than there are elements of
<code class="code">error_syms</code>, symbols are constructed automatically, with the <var class="var">n</var>-th
symbol equivalent to <code class="code">concat ('errexp, <var class="var">n</var>)</code>.
</p>
<p>See also <code class="code"><a class="ref" href="#error">error</a></code> and <code class="code"><a class="ref" href="#error_005fsize">error_size</a></code>.
</p>
<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Debugging">Debugging</a>
&middot;
<a class="ref" href="Documentation-Categories.html#Category_003a-Display-flags-and-variables">Display flags and variables</a>
&middot;
</div>
</dd></dl>

<a class="anchor" id="errormsg_005ffn"></a><a class="anchor" id="Item_003a-Program_002fdeffn_002ferrormsg"></a><dl class="first-deffn">
<dt class="deffn" id="index-errormsg"><span class="category-def">Function: </span><span><strong class="def-name">errormsg</strong> <var class="def-var-arguments">()</var><a class="copiable-link" href='#index-errormsg'> &para;</a></span></dt>
<dd>
<p>Reprints the most recent error message.
The variable <code class="code">error</code> holds the message,
and <code class="code"><a class="ref" href="#errormsg">errormsg</a></code> formats and prints it.
</p>
<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Programming">Programming</a>
&middot;
</div>
</dd></dl>

<a class="anchor" id="errormsg"></a><a class="anchor" id="Item_003a-Program_002fdefvr_002ferrormsg"></a><dl class="first-defvr">
<dt class="defvr" id="index-errormsg-1"><span class="category-def">Option variable: </span><span><strong class="def-name">errormsg</strong><a class="copiable-link" href='#index-errormsg-1'> &para;</a></span></dt>
<dd><p>Default value: <code class="code">true</code>
</p>
<p>When <code class="code">false</code> the output of error messages is suppressed.
</p>
<p>The option variable <code class="code">errormsg</code> can not be set in a block to a local 
value.  The global value of <code class="code">errormsg</code> is always present.
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(%i1) errormsg;
(%o1)                         true
</pre></div><div class="group"><pre class="example-preformatted">(%i2) sin(a,b);
sin: wrong number of arguments.
 -- an error. To debug this try: debugmode(true);
</pre></div><div class="group"><pre class="example-preformatted">(%i3) errormsg: false;
(%o3)                         false
</pre></div><div class="group"><pre class="example-preformatted">(%i4) sin(a,b);
 -- an error. To debug this try: debugmode(true);
</pre></div></div>

<p>The option variable <code class="code">errormsg</code> can not be set in a block to a local value.
</p>
<div class="example">
<pre class="example-preformatted">(%i1) f(bool):=block([errormsg:bool],
                     print (&quot;value of errormsg is&quot;,errormsg))$
</pre><div class="group"><pre class="example-preformatted">(%i2) errormsg:true;
(%o2)                         true
</pre></div><div class="group"><pre class="example-preformatted">(%i3) f(false);
value of errormsg is true 
(%o3)                         true
</pre></div><div class="group"><pre class="example-preformatted">(%i4) errormsg:false;
(%o4)                         false
</pre></div><div class="group"><pre class="example-preformatted">(%i5) f(true);
value of errormsg is false 
(%o5)                         false
</pre></div></div>

<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Programming">Programming</a>
&middot;
</div>
</dd></dl>

<a class="anchor" id="go"></a><a class="anchor" id="Item_003a-Program_002fdeffn_002fgo"></a><dl class="first-deffn">
<dt class="deffn" id="index-go"><span class="category-def">Function: </span><span><strong class="def-name">go</strong> <var class="def-var-arguments">(<var class="var">tag</var>)</var><a class="copiable-link" href='#index-go'> &para;</a></span></dt>
<dd>
<p>is used within a <code class="code"><a class="ref" href="maxima_35.html#block">block</a></code> to transfer control to the statement
of the block which is tagged with the argument to <code class="code">go</code>.  To tag a
statement, precede it by an atomic argument as another statement in
the <code class="code">block</code>.  For example:
</p>
<div class="example">
<pre class="example-preformatted">block ([x], x:1, loop, x+1, ..., go(loop), ...)
</pre></div>

<p>The argument to <code class="code">go</code> must be the name of a tag appearing in the same
<code class="code">block</code>.  One cannot use <code class="code">go</code> to transfer to tag in a <code class="code">block</code>
other than the one containing the <code class="code">go</code>.
</p>
<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Programming">Programming</a>
&middot;
</div>
</dd></dl>


<a class="anchor" id="if"></a><a class="anchor" id="Item_003a-Program_002fdeffn_002fif"></a><dl class="first-deffn">
<dt class="deffn" id="index-if"><span class="category-def">Special operator: </span><span><strong class="def-name">if</strong><a class="copiable-link" href='#index-if'> &para;</a></span></dt>
<dd>
<p>Represents conditional evaluation.  Various forms of <code class="code">if</code> expressions are
recognized.
</p>
<p><code class="code">if <var class="var">cond_1</var> then <var class="var">expr_1</var> else <var class="var">expr_0</var></code>
evaluates to <var class="var">expr_1</var> if <var class="var">cond_1</var> evaluates to <code class="code">true</code>,
otherwise the expression evaluates to <var class="var">expr_0</var>.
</p>
<p>The command <code class="code">if <var class="var">cond_1</var> then <var class="var">expr_1</var> elseif <var class="var">cond_2</var> then
<var class="var">expr_2</var> elseif ... else <var class="var">expr_0</var></code> evaluates to <var class="var">expr_k</var> if
<var class="var">cond_k</var> is <code class="code">true</code> and all preceding conditions are <code class="code">false</code>.  If
none of the conditions are <code class="code">true</code>, the expression evaluates to
<code class="code">expr_0</code>.
</p>
<p>A trailing <code class="code">else false</code> is assumed if <code class="code">else</code> is missing.  That is,
the command <code class="code">if <var class="var">cond_1</var> then <var class="var">expr_1</var></code> is equivalent to
<code class="code">if <var class="var">cond_1</var> then <var class="var">expr_1</var> else false</code>, and the command
<code class="code">if <var class="var">cond_1</var> then <var class="var">expr_1</var> elseif ... elseif <var class="var">cond_n</var> then
<var class="var">expr_n</var></code> is equivalent to <code class="code">if <var class="var">cond_1</var> then <var class="var">expr_1</var> elseif 
... elseif <var class="var">cond_n</var> then <var class="var">expr_n</var> else false</code>.
</p>
<p>The alternatives <var class="var">expr_0</var>, &hellip;, <var class="var">expr_n</var> may be any Maxima
expressions, including nested <code class="code">if</code> expressions.  The alternatives are
neither simplified nor evaluated unless the corresponding condition is
<code class="code">true</code>.
</p>
<p>The conditions <var class="var">cond_1</var>, &hellip;, <var class="var">cond_n</var> are expressions which
potentially or actually evaluate to <code class="code">true</code> or <code class="code">false</code>.
When a condition does not actually evaluate to <code class="code">true</code> or <code class="code">false</code>,
the behavior of <code class="code">if</code> is governed by the global flag <code class="code">prederror</code>.
When <code class="code">prederror</code> is <code class="code">true</code>, it is an error if any evaluated condition
does not evaluate to <code class="code">true</code> or <code class="code">false</code>.  Otherwise, conditions which
do not evaluate to <code class="code">true</code> or <code class="code">false</code> are accepted, and the result is
a conditional expression.
</p>
<p>Among other elements, conditions may comprise relational and logical operators
as follows.
</p>
<blockquote class="indentedblock">
<table class="multitable">
<thead><tr><th width="30%">Operation</th><th width="20%">Symbol</th><th width="30%">Type</th></tr></thead>
<tbody><tr><td width="30%">less than</td><td width="20%"><code class="code">&lt;</code></td><td width="30%">relational infix</td></tr>
<tr><td width="30%">less than or equal to</td><td width="20%"><code class="code">&lt;=</code></td><td width="30%">relational infix</td></tr>
<tr><td width="30%">equality (syntactic)</td><td width="20%"><code class="code">=</code></td><td width="30%">relational infix</td></tr>
<tr><td width="30%">equality (value)</td><td width="20%"><code class="code">equal</code></td><td width="30%">relational function</td></tr>
<tr><td width="30%">negation of equal</td><td width="20%"><code class="code">notequal</code></td><td width="30%">relational function</td></tr>
<tr><td width="30%">greater than or equal to</td><td width="20%"><code class="code">&gt;=</code></td><td width="30%">relational infix</td></tr>
<tr><td width="30%">greater than</td><td width="20%"><code class="code">&gt;</code></td><td width="30%">relational infix</td></tr>
<tr><td width="30%">and</td><td width="20%"><code class="code">and</code></td><td width="30%">logical infix</td></tr>
<tr><td width="30%">or</td><td width="20%"><code class="code">or</code></td><td width="30%">logical infix</td></tr>
<tr><td width="30%">not</td><td width="20%"><code class="code">not</code></td><td width="30%">logical infix</td></tr>
</tbody>
</table>
</blockquote>

<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Programming">Programming</a>
&middot;
<a class="ref" href="Documentation-Categories.html#Category_003a-Predicate-functions">Predicate functions</a>
&middot;
</div>
</dd></dl>


<a class="anchor" id="map"></a><a class="anchor" id="Item_003a-Program_002fdeffn_002fmap"></a><dl class="first-deffn">
<dt class="deffn" id="index-map"><span class="category-def">Function: </span><span><strong class="def-name">map</strong> <var class="def-var-arguments">(<var class="var">f</var>, <var class="var">expr_1</var>, &hellip;, <var class="var">expr_n</var>)</var><a class="copiable-link" href='#index-map'> &para;</a></span></dt>
<dd>
<p>Returns an expression whose leading operator is the same as that of the
expressions <var class="var">expr_1</var>, &hellip;, <var class="var">expr_n</var> but whose subparts are the
results of applying <var class="var">f</var> to the corresponding subparts of the expressions.
<var class="var">f</var> is either the name of a function of <em class="math tex2jax_process">\(n\)</em> arguments or is a
<code class="code">lambda</code> form of <em class="math tex2jax_process">\(n\)</em> arguments.
</p>
<p><code class="code"><a class="ref" href="#maperror">maperror</a></code> - if <code class="code">false</code> will cause all of the mapping
functions to (1) stop when they finish going down the shortest
<var class="var">expr_i</var> if not all of the <var class="var">expr_i</var> are of the same length and
(2) apply <var class="var">f</var> to [<var class="var">expr_1</var>, <var class="var">expr_2</var>, &hellip;]  if the
<var class="var">expr_i</var> are not all the same type of object.  If <code class="code">maperror</code>
is <code class="code">true</code> then an error message will be given in the above two
instances.
</p>
<p>One of the uses of this function is to <code class="code">map</code> a function (e.g.
<code class="code"><a class="ref" href="maxima_28.html#partfrac">partfrac</a></code>) onto each term of a very large expression where it ordinarily
wouldn&rsquo;t be possible to use the function on the entire expression due to an
exhaustion of list storage space in the course of the computation.
</p>
<p>See also <code class="code"><a class="ref" href="#scanmap">scanmap</a></code>, <code class="code"><a class="ref" href="#maplist">maplist</a></code>, <code class="code"><a class="ref" href="#outermap">outermap</a></code>, <code class="code"><a class="ref" href="maxima_22.html#matrixmap">matrixmap</a></code> and <code class="code"><a class="ref" href="maxima_35.html#apply">apply</a></code>.
</p>

<div class="example">
<pre class="example-preformatted">(%i1) map(f,x+a*y+b*z);
(%o1)                        f(b z) + f(a y) + f(x)
(%i2) map(lambda([u],partfrac(u,x)),x+1/(x^3+4*x^2+5*x+2));
                           1       1        1
(%o2)                     ----- - ----- + -------- + x
                         x + 2   x + 1          2
                                         (x + 1)
(%i3) map(ratsimp, x/(x^2+x)+(y^2+y)/y);
                                      1
(%o3)                            y + ----- + 1
                                    x + 1
(%i4) map(&quot;=&quot;,[a,b],[-0.5,3]);
(%o4)                          [a = - 0.5, b = 3]


</pre></div>

<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Function-application">Function application</a>
&middot;
</div>
</dd></dl>

<a class="anchor" id="mapatom"></a><a class="anchor" id="Item_003a-Program_002fdeffn_002fmapatom"></a><dl class="first-deffn">
<dt class="deffn" id="index-mapatom"><span class="category-def">Function: </span><span><strong class="def-name">mapatom</strong> <var class="def-var-arguments">(<var class="var">expr</var>)</var><a class="copiable-link" href='#index-mapatom'> &para;</a></span></dt>
<dd>
<p>Returns <code class="code">true</code> if and only if <var class="var">expr</var> is treated by the mapping
routines as an atom.  &quot;Mapatoms&quot; are atoms, numbers
(including rational numbers), subscripted variables and structure
references.
</p>
<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Predicate-functions">Predicate functions</a>
&middot;
</div>
</dd></dl>


<a class="anchor" id="maperror"></a><a class="anchor" id="Item_003a-Program_002fdefvr_002fmaperror"></a><dl class="first-defvr">
<dt class="defvr" id="index-maperror"><span class="category-def">Option variable: </span><span><strong class="def-name">maperror</strong><a class="copiable-link" href='#index-maperror'> &para;</a></span></dt>
<dd><p>Default value: <code class="code">true</code>
</p>
<p>When <code class="code">maperror</code> is <code class="code">false</code>, causes all of the mapping functions,
for example
</p>
<div class="example">
<pre class="example-preformatted">map (<var class="var">f</var>, <var class="var">expr_1</var>, <var class="var">expr_2</var>, ...)
</pre></div>

<p>to (1) stop when they finish going down the shortest <var class="var">expr_i</var> if
not all of the <var class="var">expr_i</var> are of the same length and (2) apply
<var class="var">f</var> to [<var class="var">expr_1</var>, <var class="var">expr_2</var>, &hellip;] if the <var class="var">expr_i</var> are
not all the same type of object.
</p>
<p>If <code class="code">maperror</code> is <code class="code">true</code> then an error message
is displayed in the above two instances.
</p>
<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Function-application">Function application</a>
&middot;
</div>
</dd></dl>

<a class="anchor" id="mapprint"></a><a class="anchor" id="Item_003a-Program_002fdefvr_002fmapprint"></a><dl class="first-defvr">
<dt class="defvr" id="index-mapprint"><span class="category-def">Option variable: </span><span><strong class="def-name">mapprint</strong><a class="copiable-link" href='#index-mapprint'> &para;</a></span></dt>
<dd><p>Default value: <code class="code">true</code>
</p>
<p>When <code class="code">mapprint</code> is <code class="code">true</code>, various information messages from
<code class="code"><a class="ref" href="#map">map</a></code>, <code class="code"><a class="ref" href="#maplist">maplist</a></code>, and <code class="code"><a class="ref" href="maxima_35.html#fullmap">fullmap</a></code> are produced in certain
situations.  These include situations where <code class="code">map</code> would use
<code class="code"><a class="ref" href="maxima_35.html#apply">apply</a></code>, or <code class="code">map</code> is truncating on the shortest list.
</p>
<p>If <code class="code"><a class="ref" href="#mapprint">mapprint</a></code> is <code class="code">false</code>, these messages are suppressed.
</p>
<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Function-application">Function application</a>
&middot;
</div>
</dd></dl>


<a class="anchor" id="maplist"></a><a class="anchor" id="Item_003a-Program_002fdeffn_002fmaplist"></a><dl class="first-deffn">
<dt class="deffn" id="index-maplist"><span class="category-def">Function: </span><span><strong class="def-name">maplist</strong> <var class="def-var-arguments">(<var class="var">f</var>, <var class="var">expr_1</var>, &hellip;, <var class="var">expr_n</var>)</var><a class="copiable-link" href='#index-maplist'> &para;</a></span></dt>
<dd>
<p>Returns a list of the applications of <var class="var">f</var> to the parts of the expressions
<var class="var">expr_1</var>, &hellip;, <var class="var">expr_n</var>.  <var class="var">f</var> is the name of a function, or a
lambda expression.
</p>
<p><code class="code">maplist</code> differs from <code class="code">map(<var class="var">f</var>, <var class="var">expr_1</var>, ..., <var class="var">expr_n</var>)</code>
which returns an expression with the same main operator as <var class="var">expr_i</var> has
(except for simplifications and the case where <code class="code"><a class="ref" href="#map">map</a></code> does an <code class="code"><a class="ref" href="maxima_35.html#apply">apply</a></code>).
</p>
<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Function-application">Function application</a>
&middot;
</div>
</dd></dl>


<a class="anchor" id="prederror"></a><a class="anchor" id="Item_003a-Program_002fdefvr_002fprederror"></a><dl class="first-defvr">
<dt class="defvr" id="index-prederror"><span class="category-def">Option variable: </span><span><strong class="def-name">prederror</strong><a class="copiable-link" href='#index-prederror'> &para;</a></span></dt>
<dd><p>Default value: <code class="code">false</code>
</p>
<p>When <code class="code">prederror</code> is <code class="code">true</code>, an error message is displayed whenever the
predicate of an <code class="code">if</code> statement or an <code class="code"><a class="ref" href="maxima_10.html#is">is</a></code> function fails to evaluate
to either <code class="code">true</code> or <code class="code">false</code>.
</p>
<p>If <code class="code">false</code>, <code class="code">unknown</code> is returned
instead in this case.  The <code class="code">prederror: false</code> mode is not supported in
translated code;
however, <code class="code">maybe</code> is supported in translated code.
</p>
<p>See also <code class="code"><a class="ref" href="maxima_10.html#is">is</a></code> and <code class="code"><a class="ref" href="maxima_10.html#maybe">maybe</a></code>.
</p>
<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Programming">Programming</a>
&middot;
<a class="ref" href="Documentation-Categories.html#Category_003a-Predicate-functions">Predicate functions</a>
&middot;
</div>

</dd></dl>

<a class="anchor" id="return"></a><a class="anchor" id="Item_003a-Program_002fdeffn_002freturn"></a><dl class="first-deffn">
<dt class="deffn" id="index-return"><span class="category-def">Function: </span><span><strong class="def-name">return</strong> <var class="def-var-arguments">(<var class="var">value</var>)</var><a class="copiable-link" href='#index-return'> &para;</a></span></dt>
<dd><p>May be used to exit explicitly from the current <code class="code"><a class="ref" href="maxima_35.html#block">block</a></code>, <code class="code"><a class="ref" href="#while">while</a></code>,
<code class="code"><a class="ref" href="#for">for</a></code> or <code class="code"><a class="ref" href="#do">do</a></code> loop bringing its argument. It therefore can be compared
with the <code class="code">return</code> statement found in other programming languages but it yields
one difference: In maxima only returns from the current block, not from the entire
function it was called in. In this aspect it more closely resembles the <code class="code">break</code>
statement from C.
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(%i1) for i:1 thru 10 do o:i;
(%o1)                         done
</pre></div><div class="group"><pre class="example-preformatted">(%i2) for i:1 thru 10 do if i=3 then return(i);
(%o2)                           3
</pre></div><div class="group"><pre class="example-preformatted">(%i3) for i:1 thru 10 do
    (
        block([i],
            i:3,
            return(i)
        ),
        return(8)
    );
(%o3)                           8
</pre></div><pre class="example-preformatted">(%i4) block([i],
    i:4,
    block([o],
        o:5,
        return(o)
    ),
    return(i),
    return(10)
 );
(%o4)                           4
</pre></div>


<p>See also <code class="code"><a class="ref" href="#for">for</a></code>, <code class="code"><a class="ref" href="#while">while</a></code>, <code class="code"><a class="ref" href="#do">do</a></code> and <code class="code"><a class="ref" href="maxima_35.html#block">block</a></code>.
</p>
<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Programming">Programming</a>
&middot;
</div>
</dd></dl>

<a class="anchor" id="scanmap"></a><a class="anchor" id="Item_003a-Program_002fdeffn_002fscanmap"></a><dl class="first-deffn">
<dt class="deffn" id="index-scanmap"><span class="category-def">Function: </span><span><strong class="def-name">scanmap</strong> <var class="def-var-arguments"><br>&nbsp;&nbsp;&nbsp;&nbsp;<code class="t">scanmap</code> (<var class="var">f</var>, <var class="var">expr</var>) <br>&nbsp;&nbsp;&nbsp;&nbsp;<code class="t">scanmap</code> (<var class="var">f</var>, <var class="var">expr</var>, bottomup)</var><a class="copiable-link" href='#index-scanmap'> &para;</a></span></dt>
<dd>
<p>Recursively applies <var class="var">f</var> to <var class="var">expr</var>, in a top
down manner.  This is most useful when complete factorization is
desired, for example:
</p>
<div class="example">
<pre class="example-preformatted">(%i1) exp:(a^2+2*a+1)*y + x^2$
(%i2) scanmap(factor,exp);
                                    2      2
(%o2)                         (a + 1)  y + x
</pre></div>

<p>Note the way in which <code class="code">scanmap</code> applies the given function
<code class="code">factor</code> to the constituent subexpressions of <var class="var">expr</var>; if
another form of <var class="var">expr</var> is presented to <code class="code">scanmap</code> then the
result may be different.  Thus, <code class="code">%o2</code> is not recovered when
<code class="code">scanmap</code> is applied to the expanded form of <code class="code">exp</code>:
</p>
<div class="example">
<pre class="example-preformatted">(%i3) scanmap(factor,expand(exp));
                           2                  2
(%o3)                      a  y + 2 a y + y + x
</pre></div>

<p>Here is another example of the way in which <code class="code">scanmap</code> recursively
applies a given function to all subexpressions, including exponents:
</p>
<div class="example">
<pre class="example-preformatted">(%i4) expr : u*v^(a*x+b) + c$
(%i5) scanmap('f, expr);
                    f(f(f(a) f(x)) + f(b))
(%o5) f(f(f(u) f(f(v)                      )) + f(c))
</pre></div>

<p><code class="code">scanmap (<var class="var">f</var>, <var class="var">expr</var>, bottomup)</code> applies <var class="var">f</var> to <var class="var">expr</var> in a
bottom-up manner.  E.g., for undefined <code class="code">f</code>,
</p>
<div class="example">
<pre class="example-preformatted">scanmap(f,a*x+b) -&gt;
   f(a*x+b) -&gt; f(f(a*x)+f(b)) -&gt; f(f(f(a)*f(x))+f(b))
scanmap(f,a*x+b,bottomup) -&gt; f(a)*f(x)+f(b)
    -&gt; f(f(a)*f(x))+f(b) -&gt;
     f(f(f(a)*f(x))+f(b))
</pre></div>

<p>In this case, you get the same answer both
ways.
</p>
<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Function-application">Function application</a>
&middot;
</div>
</dd></dl>

<a class="anchor" id="throw"></a><a class="anchor" id="Item_003a-Program_002fdeffn_002fthrow"></a><dl class="first-deffn">
<dt class="deffn" id="index-throw"><span class="category-def">Function: </span><span><strong class="def-name">throw</strong> <var class="def-var-arguments">(<var class="var">expr</var>)</var><a class="copiable-link" href='#index-throw'> &para;</a></span></dt>
<dd>
<p>Evaluates <var class="var">expr</var> and throws the value back to the most recent
<code class="code"><a class="ref" href="maxima_35.html#catch">catch</a></code>.  <code class="code">throw</code> is used with <code class="code">catch</code> as a nonlocal return
mechanism.
</p>
<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Programming">Programming</a>
&middot;
</div>
</dd></dl>

<a class="anchor" id="outermap"></a><a class="anchor" id="Item_003a-Program_002fdeffn_002foutermap"></a><dl class="first-deffn">
<dt class="deffn" id="index-outermap"><span class="category-def">Function: </span><span><strong class="def-name">outermap</strong> <var class="def-var-arguments">(<var class="var">f</var>, <var class="var">a_1</var>, &hellip;, <var class="var">a_n</var>)</var><a class="copiable-link" href='#index-outermap'> &para;</a></span></dt>
<dd>
<p>Applies the function <var class="var">f</var> to each one of the elements of the outer product
<var class="var">a_1</var> cross <var class="var">a_2</var> &hellip; cross <var class="var">a_n</var>.
</p>
<p><var class="var">f</var> is the name of a function of <em class="math tex2jax_process">\(n\)</em> arguments or a lambda expression
of <em class="math tex2jax_process">\(n\)</em> arguments.  Each argument <var class="var">a_k</var> may be a list or nested list,
or a matrix, or any other kind of expression.
</p>
<p>The <code class="code">outermap</code> return value is a nested structure.  Let <var class="var">x</var> be the
return value.  Then <var class="var">x</var> has the same structure as the first list, nested
list, or matrix argument, <code class="code"><var class="var">x</var>[i_1]...[i_m]</code> has the same structure as
the second list, nested list, or matrix argument,
<code class="code"><var class="var">x</var>[i_1]...[i_m][j_1]...[j_n]</code> has the same structure as the third
list, nested list, or matrix argument, and so on, where <var class="var">m</var>, <var class="var">n</var>,
&hellip; are the numbers of indices required to access the elements of each
argument (one for a list, two for a matrix, one or more for a nested list).
Arguments which are not lists or matrices have no effect on the structure of
the return value.
</p>
<p>Note that the effect of <code class="code">outermap</code> is different from that of applying
<var class="var">f</var> to each one of the elements of the outer product returned by
<code class="code"><a class="ref" href="maxima_34.html#cartesian_005fproduct">cartesian_product</a></code>.  <code class="code">outermap</code> preserves the structure of the
arguments in the return value, while <code class="code">cartesian_product</code> does not.
</p>
<p><code class="code">outermap</code> evaluates its arguments.
</p>
<p>See also <code class="code"><a class="ref" href="#map">map</a></code>, <code class="code"><a class="ref" href="#maplist">maplist</a></code>, and <code class="code"><a class="ref" href="maxima_35.html#apply">apply</a></code>.
</p>
<p>Examples:
</p>
<p>Elementary examples of <code class="code">outermap</code>.
To show the argument combinations more clearly, <code class="code">F</code> is left undefined.
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(%i1) outermap (F, [a, b, c], [1, 2, 3]);
(%o1) [[F(a, 1), F(a, 2), F(a, 3)], [F(b, 1), F(b, 2), F(b, 3)], 
                                     [F(c, 1), F(c, 2), F(c, 3)]]
</pre></div><div class="group"><pre class="example-preformatted">(%i2) outermap (F, matrix ([a, b], [c, d]), matrix ([1, 2], [3, 4]));
         [ [ F(a, 1)  F(a, 2) ]  [ F(b, 1)  F(b, 2) ] ]
         [ [                  ]  [                  ] ]
         [ [ F(a, 3)  F(a, 4) ]  [ F(b, 3)  F(b, 4) ] ]
(%o2)    [                                            ]
         [ [ F(c, 1)  F(c, 2) ]  [ F(d, 1)  F(d, 2) ] ]
         [ [                  ]  [                  ] ]
         [ [ F(c, 3)  F(c, 4) ]  [ F(d, 3)  F(d, 4) ] ]
</pre></div><div class="group"><pre class="example-preformatted">(%i3) outermap (F, [a, b], x, matrix ([1, 2], [3, 4]));
       [ F(a, x, 1)  F(a, x, 2) ]  [ F(b, x, 1)  F(b, x, 2) ]
(%o3) [[                        ], [                        ]]
       [ F(a, x, 3)  F(a, x, 4) ]  [ F(b, x, 3)  F(b, x, 4) ]
</pre></div><div class="group"><pre class="example-preformatted">(%i4) outermap (F, [a, b], matrix ([1, 2]), matrix ([x], [y]));
       [ [ F(a, 1, x) ]  [ F(a, 2, x) ] ]
(%o4) [[ [            ]  [            ] ], 
       [ [ F(a, 1, y) ]  [ F(a, 2, y) ] ]
                              [ [ F(b, 1, x) ]  [ F(b, 2, x) ] ]
                              [ [            ]  [            ] ]]
                              [ [ F(b, 1, y) ]  [ F(b, 2, y) ] ]
</pre></div><div class="group"><pre class="example-preformatted">(%i5) outermap (&quot;+&quot;, [a, b, c], [1, 2, 3]);
(%o5) [[a + 1, a + 2, a + 3], [b + 1, b + 2, b + 3], 
                                           [c + 1, c + 2, c + 3]]
</pre></div></div>

<p>A closer examination of the <code class="code">outermap</code> return value.  The first, second,
and third arguments are a matrix, a list, and a matrix, respectively.
The return value is a matrix.
Each element of that matrix is a list,
and each element of each list is a matrix.
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(%i1) arg_1 :  matrix ([a, b], [c, d]);
                            [ a  b ]
(%o1)                       [      ]
                            [ c  d ]
</pre></div><div class="group"><pre class="example-preformatted">(%i2) arg_2 : [11, 22];
(%o2)                       [11, 22]
</pre></div><div class="group"><pre class="example-preformatted">(%i3) arg_3 : matrix ([xx, yy]);
(%o3)                      [ xx  yy ]
</pre></div><pre class="example-preformatted">(%i4) xx_0 : outermap (lambda ([x, y, z], x / y + z), arg_1,
                                                   arg_2, arg_3);
               [  [      a        a  ]  [      a        a  ]  ]
               [ [[ xx + --  yy + -- ], [ xx + --  yy + -- ]] ]
               [  [      11       11 ]  [      22       22 ]  ]
(%o4)  Col 1 = [                                              ]
               [  [      c        c  ]  [      c        c  ]  ]
               [ [[ xx + --  yy + -- ], [ xx + --  yy + -- ]] ]
               [  [      11       11 ]  [      22       22 ]  ]
                 [  [      b        b  ]  [      b        b  ]  ]
                 [ [[ xx + --  yy + -- ], [ xx + --  yy + -- ]] ]
                 [  [      11       11 ]  [      22       22 ]  ]
         Col 2 = [                                              ]
                 [  [      d        d  ]  [      d        d  ]  ]
                 [ [[ xx + --  yy + -- ], [ xx + --  yy + -- ]] ]
                 [  [      11       11 ]  [      22       22 ]  ]
</pre><div class="group"><pre class="example-preformatted">(%i5) xx_1 : xx_0 [1][1];
           [      a        a  ]  [      a        a  ]
(%o5)     [[ xx + --  yy + -- ], [ xx + --  yy + -- ]]
           [      11       11 ]  [      22       22 ]
</pre></div><div class="group"><pre class="example-preformatted">(%i6) xx_2 : xx_0 [1][1] [1];
                      [      a        a  ]
(%o6)                 [ xx + --  yy + -- ]
                      [      11       11 ]
</pre></div><div class="group"><pre class="example-preformatted">(%i7) xx_3 : xx_0 [1][1] [1] [1][1];
                                  a
(%o7)                        xx + --
                                  11
</pre></div><div class="group"><pre class="example-preformatted">(%i8) [op (arg_1), op (arg_2), op (arg_3)];
(%o8)                  [matrix, [, matrix]
</pre></div><div class="group"><pre class="example-preformatted">(%i9) [op (xx_0), op (xx_1), op (xx_2)];
(%o9)                  [matrix, [, matrix]
</pre></div></div>

<p><code class="code">outermap</code> preserves the structure of the arguments in the return value,
while <code class="code">cartesian_product</code> does not.
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(%i1) outermap (F, [a, b, c], [1, 2, 3]);
(%o1) [[F(a, 1), F(a, 2), F(a, 3)], [F(b, 1), F(b, 2), F(b, 3)], 
                                     [F(c, 1), F(c, 2), F(c, 3)]]
</pre></div><div class="group"><pre class="example-preformatted">(%i2) setify (flatten (%));
(%o2) {F(a, 1), F(a, 2), F(a, 3), F(b, 1), F(b, 2), F(b, 3), 
                                       F(c, 1), F(c, 2), F(c, 3)}
</pre></div><div class="group"><pre class="example-preformatted">(%i3) map (lambda ([L], apply (F, L)),
                     cartesian_product ({a, b, c}, {1, 2, 3}));
(%o3) {F(a, 1), F(a, 2), F(a, 3), F(b, 1), F(b, 2), F(b, 3), 
                                       F(c, 1), F(c, 2), F(c, 3)}
</pre></div><div class="group"><pre class="example-preformatted">(%i4) is (equal (%, %th (2)));
(%o4)                         true
</pre></div></div>

<div class=categorybox>
Categories:
<a class="ref" href="Documentation-Categories.html#Category_003a-Function-application">Function application</a>
&middot;
</div>
</dd></dl>


</div>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="maxima_37.html#Debugging" accesskey="n" rel="next">Debugging</a>, Previous: <a href="maxima_35.html#Function-Definition" accesskey="p" rel="prev">Function Definition</a> &nbsp; [<a href="maxima_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Variable-Index.html" title="Index" rel="index">Index</a>]</p>
</div>


<a href="js_licenses.html" rel="jslicense"><small>JavaScript license information</small></a>
</body>
</html>
